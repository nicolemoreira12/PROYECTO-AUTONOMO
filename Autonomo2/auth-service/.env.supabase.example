# ===============================
# SERVER CONFIGURATION
# ===============================

PORT=4000
NODE_ENV=development
API_VERSION=v1

# ===============================
# DATABASE CONFIGURATION (SUPABASE)
# ===============================

DB_HOST=db.YOUR_PROJECT_REF.supabase.co
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=TU_PASSWORD_SUPABASE
DB_DATABASE=postgres
DB_SSL=true
DB_SYNCHRONIZE=false
DB_LOGGING=false

# ===============================
# SUPABASE CONFIGURATION
# ===============================

SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ===============================
# JWT CONFIGURATION
# ===============================

# IMPORTANTE: Estos secretos deben coincidir con Markplace
JWT_ACCESS_SECRET=tu-clave-secreta-access-super-segura-2024
JWT_REFRESH_SECRET=tu-clave-secreta-refresh-super-segura-2024

# Expiración
JWT_ACCESS_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# Issuer y Audience (validación adicional)
JWT_ISSUER=auth-service
JWT_AUDIENCE=marketplace-app

# ===============================
# REDIS CONFIGURATION (opcional)
# ===============================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# ===============================
# RATE LIMITING
# ===============================

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=5
RATE_LIMIT_ENABLED=true

# ===============================
# CORS CONFIGURATION
# ===============================

CORS_ORIGIN=http://localhost:5173,http://localhost:5174,http://localhost:3000
CORS_CREDENTIALS=true

# ===============================
# EMAIL VERIFICATION
# ===============================

EMAIL_VERIFICATION_REQUIRED=false
EMAIL_VERIFICATION_EXPIRATION=24h

# ===============================
# PASSWORD POLICY
# ===============================

PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=false

# ===============================
# SESSION MANAGEMENT
# ===============================

MAX_SESSIONS_PER_USER=5
SESSION_ABSOLUTE_TIMEOUT=7d
SESSION_IDLE_TIMEOUT=1h

# ===============================
# SECURITY
# ===============================

# Bcrypt rounds (10-12 recomendado, más alto = más seguro pero más lento)
BCRYPT_ROUNDS=10

# Cookie settings (si usas cookies para tokens)
COOKIE_SECURE=false
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE=lax

# ===============================
# LOGGING
# ===============================

LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=./logs/auth-service.log

# ===============================
# MONITORING
# ===============================

# Sentry
SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx
SENTRY_ENVIRONMENT=development

# ===============================
# OAUTH PROVIDERS (opcional)
# ===============================

# Google OAuth
GOOGLE_CLIENT_ID=xxxxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=xxxxx
GOOGLE_REDIRECT_URI=http://localhost:4000/auth/google/callback

# Facebook OAuth
FACEBOOK_APP_ID=xxxxx
FACEBOOK_APP_SECRET=xxxxx
FACEBOOK_REDIRECT_URI=http://localhost:4000/auth/facebook/callback

# ===============================
# TWO-FACTOR AUTHENTICATION (opcional)
# ===============================

TWO_FACTOR_ENABLED=false
TWO_FACTOR_APP_NAME=Marketplace
TWO_FACTOR_ISSUER=auth-service
